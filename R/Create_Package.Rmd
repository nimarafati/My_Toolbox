---
title: ""
author: "Nima Rafati"
date: `r Sys.Date()`
output:
  github_document:
  toc: true
---
The following is based on materials on [RaukR](https://github.com/NBISweden/RaukR-2022) course by *Sebastian DiLorenzo*.  
You need the following libraries:  
```{r, eval = F}
library(c("devtools","usethis","roxygen2", "knitr", "rmarkdown", "reshape2", "Rcpp"))
```


- Create a function   
```{r, eval = F}
function(x) {
  for(i in 1:x){
    cat(rep( letters[i], times = i),"\n")
  }
}
```

- Create two datasets: i) to distribute with the package ii) for internal use  
```{r, eval = F}
your_object <- c('red','green','blue')
usethis::use_data(your_object)

second_object <- "It works!"
usethis::use_data(second_object, internal = TRUE)

# Clear workspace
rm(list=ls())
```

- Update the function  
```{r, eval = F}
function(x) {
  for(i in 1:x){
    cat(rep( letters[i], times = i),"\n")
  }
  cat(second_object)
}

```

- Load all functions and data from your package   
```{r, eval = F}
devtools::load_all()
```

- Function documentation: Save the following in a *.R* file and then run `devtools::document()`.      
```{r, eval = F}
#' A right sided triangle of alphabetic letters
#'
#' A right sided triangle of alphabetic letters
#'
#' This function takes a number as input and outputs an increasing
#'     number of alphabetic letters on top of eachother, resembling
#'     a right sided triangle.
#' @section Warning:
#' Not tested for numbers over 26!
#'
#' @param x A number.
#' @return Outputs to console. NULL object returned.
#' @examples
#' trianguletter(10)
#' @export
trianguletter <- function(x) {
  for(i in 1:x){
    cat(rep( letters[i], times = i),"\n")
  }
  # Check if second object can be called by our function
  cat(second_object)
}
```

- Data documentation  
```{r, eval = F}
#' A vector with three strings
#'
#' A dataset containing three strings usually linked to the
#'    colors of pixels on a screen.
#'
#' @format A vector with three strings:
#' \describe{
#'   \item{red}{A string, it's red.}
#'   \item{green}{A string, it's green. Street talk for money.}
#'   \item{blue}{A string, really didn't see that coming. It's blue this time!}
#' }
#' @source \url{http://www.themindofsebastian.com}
"your_object"
```
- Check the content of the documentation by  
```{r, eval = F}
?your_object
?trianguletter
```

- Vignette: By running   `usethis::use_vignette("packagename_vignette")` a file ("packagename_vignette.Rmd"). Update the file as you wish and then execute by *Cmd/Ctrl + Shift + B.*       

```{r, eval = F}
---
title: "How to write more and more letters, in a triangle"
author: "Sebastian DiLorenzo"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{How to write more and more letters, in a triangle}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

\```{r setup, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)

# replace this with your package name
library(newpkg)
\```
.
.
.

```

You should remove  *\* from  *\``` *.   


- You can edit *DESCRIPTION* file by updating licencing for example which you are able to find relevant information on each lincense (here)[https://tldrlegal.com].  


- To import other libraries you can create a file * R/utility.R* and add few packages:  
```{r, eval = F}
#' @importFrom reshape2 melt
NULL
```

and then run `devtools::document()` if you got error: *It already exists and was not generated by roxygen2.* then delete *NAMESPACE* file and rerun `devtools::document()`.  

- Check your package:  Either by `devtools::check()`  in R or on command line `R CMD check` *packagename*.  
